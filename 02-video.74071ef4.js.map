{"mappings":"YAAA,IAAMA,EAAc,2BACdC,EAAS,IAAIC,MAAMC,OAAO,gBAC5BC,EAAc,GAS4D,WAC5E,IAAIC,EACAC,EAAU,EACVC,aAAaC,QAAQR,KACvBK,EAASI,QACP,+HAICJ,IACHC,EAAUI,OAAOH,aAAaC,QAAQR,KAGxCC,EAAOU,eAAeL,E,CAnBoFM,GAwB1GX,EAAOY,GAAG,cAAc,WAuB1B,IAAwBC,EAEhBC,EAhBNd,EACGe,iBACAC,MAAK,SAAUC,GAGd,OAAQd,EAAcc,C,IAEvBC,OAAM,SAAUC,GAEfC,QAAQC,IAAI,aAAcF,E,IAKRN,EApBLV,EAsBXW,EAAOR,aAAagB,QAAQvB,EAAawB,KAAKC,MAAMX,IAC1DY,EAAEC,SAASZ,EAAM,I","sources":["src/js/02-video.js"],"sourcesContent":["const STORAGE_KEY = 'videoplayer-current-time';\nconst player = new Vimeo.Player('vimeo-player');\nlet currentTime = 0;\n\n// Запрашиваем у пользователя, нужно ли продолжить просмотр видео с места последней остановки. Устанавливаем текушее время видео.\nonSetTimePlayer();\n\n// Запускаем слушатель событий на метод обновления времени просмотра timeupdate\nonListenerPlay();\n\n// 1. Функция проверки реакции пользователя и установку точки в сохраненную позицию или в начало\nfunction onSetTimePlayer() {\n  let result;\n  let setTime = 0;\n  if (localStorage.getItem(STORAGE_KEY)) {\n    result = confirm(\n      'If you want to start watching again, please click OK. Otherwise, watching will continue from where you left off last time.'\n    );\n  }\n\n  if (!result) {\n    setTime = Number(localStorage.getItem(STORAGE_KEY));\n  }\n  //   console.log('setTime :>> ', setTime);\n  player.setCurrentTime(setTime);\n}\n\n// 2. Функция установки прослушивателя на событие timeupdate\nfunction onListenerPlay() {\n  player.on('timeupdate', function () {\n    //  console.log('CurrentTime the video!');\n    onGetCurrentTime();\n    onWriteStorage(currentTime);\n  });\n}\n\n// 3. Функция получения текущего времени произведения видео\nfunction onGetCurrentTime() {\n  player\n    .getCurrentTime()\n    .then(function (seconds) {\n      // seconds = the current playback position\n      // console.log('seconds :>> ', seconds);\n      return (currentTime = seconds);\n    })\n    .catch(function (error) {\n      // an error occurred\n      console.log('error :>> ', error);\n    });\n}\n\n// 4. Функция сохранения текущего времени воспроизведения в localStorage\nfunction onWriteStorage(value) {\n  //   console.log('currentValue :>> ', value);\n  const item = localStorage.setItem(STORAGE_KEY, Math.floor(value));\n  _.throttle(item, 1000);\n}\n"],"names":["$5a94271ad32ea534$var$STORAGE_KEY","$5a94271ad32ea534$var$player","Vimeo","Player","$5a94271ad32ea534$var$currentTime","result","setTime","localStorage","getItem","confirm","Number","setCurrentTime","$5a94271ad32ea534$var$onSetTimePlayer","on","value","item","getCurrentTime","then","seconds","catch","error","console","log","setItem","Math","floor","_","throttle"],"version":3,"file":"02-video.74071ef4.js.map"}