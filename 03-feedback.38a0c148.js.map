{"mappings":"AAAA,MAAMA,EAAOC,SAASC,cAAc,kBAE9BC,EAAW,IAAIC,SAwBiB,SAA7BC,EAAYC,GACnB,MAAuB,iBAAZA,EACFC,KAAKC,MAAMF,GAEXC,KAAKE,UAAUC,OAAOC,YAAYR,EAASS,W,CA1BtDZ,EAAKa,iBAAiB,SA2CgB,SAAbC,GACvB,MAAMC,EAAMD,EAAME,OAElBb,EAASc,IAAIF,EAAIG,KAAMH,EAAII,OAC3B,MAAMC,OARNC,aAAaC,QA1CK,sBA0CgBjB,EAAYF,IAU9C,OADAoB,EAAEC,SAASJ,EAAM,KACVjB,C,IAhDTH,EAAKa,iBAAiB,UAoDtB,SAA0BC,GAGxB,GAFAA,EAAMW,iBAEwB,OAA1BtB,EAASuB,IAAI,UAAiD,OAA5BvB,EAASuB,IAAI,WAEjD,YADAC,OAAOC,MAAM,kCAIfC,QAAQC,IAAI,UAAW3B,EAASuB,IAAI,UACpCG,QAAQC,IAAI,YAAa3B,EAASuB,IAAI,YACtCvB,EAAS4B,OAAO,SAChB5B,EAAS4B,OAAO,WAChBjB,EAAME,OAAOgB,QACbX,aAAaY,WArEK,sB,IAUC,WACnB,MAAMC,EAAYb,aAAac,QAXb,uBAalB,GAAID,EAAW,CACb,MAAMlB,EAASX,EAAY6B,GAE3B/B,EAASc,IAAI,QAASD,EAAOoB,OAC7BjC,EAASc,IAAI,UAAWD,EAAOqB,SAmBjCrC,EAAKoC,MAAMjB,MAAQhB,EAASuB,IAAI,SAChC1B,EAAKqC,QAAQlB,MAAQhB,EAASuB,IAAI,U,EA9ByBY","sources":["src/js/03-feedback.js"],"sourcesContent":["const form = document.querySelector('.feedback-form');\nconst STORAGE_KEY = 'feedback-form-state';\nconst formData = new FormData();\n\nform.addEventListener('input', onFeedbackInput);\nform.addEventListener('submit', onFeedbackSubmit);\n\n// 1. При загрузке/перезагрузке страницы, считываем наличие записи в localStorage по ключу STORAGE_KEY\nonReadStorage();\n\n// 2. Функция чтения данных из LocalStorage\nfunction onReadStorage() {\n  const savedForm = localStorage.getItem(STORAGE_KEY);\n  //   console.log('savedForm :>> ', localStorage.getItem(STORAGE_KEY));\n  if (savedForm) {\n    const target = onCheckData(savedForm);\n\n    formData.set('email', target.email);\n    formData.set('message', target.message);\n    // 2. Если в хранилище есть данные, вызываем функцию для перезаписи данных в поля формы\n    onReWriteFormField();\n  }\n}\n\n// 3. Функция проверки данных, если это строка то парсит данные в форму,\n//если объект, то переводит в строку для записи в LocalStorage\nfunction onCheckData(subject) {\n  if (typeof subject === 'string') {\n    return JSON.parse(subject);\n  } else {\n    return JSON.stringify(Object.fromEntries(formData.entries()));\n  }\n}\n\n// 4. Вызываем функцию записи в поля формы из ключей FormData\nfunction onReWriteFormField() {\n  //   console.log('form :>> ', formData.get('email'));\n  form.email.value = formData.get('email');\n  form.message.value = formData.get('message');\n}\n\n// 5. Функция записи данных формы в LocalStorage\nfunction onWriteStorage() {\n  localStorage.setItem(STORAGE_KEY, onCheckData(formData));\n}\n\n// 6. Колбек-функция для получения данных из формы\nfunction onFeedbackInput(event) {\n  const evt = event.target;\n\n  formData.set(evt.name, evt.value);\n  const temp = onWriteStorage();\n  _.throttle(temp, 500);\n  return formData;\n}\n\n// 7. Колбек-функция для отправки данных формы и очистка полей формы, ключей localStorage и FormData\nfunction onFeedbackSubmit(event) {\n  event.preventDefault();\n\n  if (formData.get('email') === null || formData.get('message') === null) {\n    window.alert('Please fill in all the fields!');\n    return;\n  }\n\n  console.log('email: ', formData.get('email'));\n  console.log('message: ', formData.get('message'));\n  formData.delete('email');\n  formData.delete('message');\n  event.target.reset();\n  localStorage.removeItem(STORAGE_KEY);\n}\n"],"names":["$945622fd0f572e60$var$form","document","querySelector","$945622fd0f572e60$var$formData","FormData","$945622fd0f572e60$var$onCheckData","subject","JSON","parse","stringify","Object","fromEntries","entries","addEventListener","event","evt","target","set","name","value","temp","localStorage","setItem","_","throttle","preventDefault","get","window","alert","console","log","delete","reset","removeItem","savedForm","getItem","email","message","$945622fd0f572e60$var$onReadStorage"],"version":3,"file":"03-feedback.38a0c148.js.map"}